{% extends 'Front/base/main.html.twig' %}
{% block titleHeader %}
Ver cliente
{% endblock %}
{% block content %}
{% include 'Front/base/header.html.twig' %}

<link rel="stylesheet" href="/css/css_all/bills/editSupplements.css">

<body class="container_clientes">

    <div class="container mt-1">

        <div class="titulo_bills_list">

            <div class="row">
                <div class="col-4 pl-3">
                    <a href="javascript: history.go(-1)">&nbsp;&nbsp;&nbsp;
                        <img class="ml-3 pt-4 " src="\images\arrow_white_izq.png" alt="...">
                    </a>
                </div>
                <div class="col-4"></div>
                <div class="col-4"></div>
            </div>

            <div class="cssscan">
                <p>
                    <h4 class="display-4 text-center text-white">Editar la Factura
                        {{id_bills}}</h4>
                </p>
                <p class=" texto_titulo text-white">
                    Factura generada de suplementos
                </p>
                </span>
                </p>
                </p>

                <img src="\images\icono_factura_svg.svg" alt="...">

            </div>
        </div>

        <div class=" mt-1">
             {% include 'Front/base/Bills/msgBills.html.twig' %}
   {% for bill in bills %}
            <form id="mi-formulario" action="{{ baseUrl('editSaveBillsSupl') }}" method="POST">

             <input type="hidden" name="id_bills" value="{{bill.id_bills}}">

                <div class="col-12  contenedor p-3 ">

                    <div class="row mt-3">

                        <div class="col-sm-4 pre_div_info">

                            <span class="pre_text_customers mt-2">
                                <b>
                                    TOT PER CONSTRUIR 2012, S.L.</b>
                            </span><br>

                            <span class="pre_text_customers">
                                C.I.F.: DB-98474497 NIMA:
                            </span><br>

                            <span class="pre_text_customers">Dirección: Calle Rio Guadalaviar, 6. Quart de Poblet
                                (Valencia)</span><br>

                            <span class="pre_text_customers">
                                CP: 46930 – Teléfono: 961391755 – 656414748</span><br>

                            <span class="pre_text_customers">Correo electrónico: gestion@tpc2012.es Página web:
                                www.tpc2012.es
                            </span>
                            <br>

                        </div>

                        <div class="col-sm-4  text-center">

                             <img src="\images\logo\logos_facturas_2.png" width="350" height="110" alt="logo" class="mt-2"><br>

                        </div>

                        <div class="col-sm-4 pre_div_info">

                            . Recogida y transporte de residuos no peligrosos<br>
                            · Recogida y destruccion de documentacion confidencial<br>
                            · Alquiler de maquinaria de obra publica con conductor especializado<br>
                            · Suministro y transporte de aridos en camion de gran tonelaje<br>

                        </div>
                    </div>

                    <div class="row">

                        <div class="col-sm-4 pre_div_info">

                            <span class="text_adress">
                                <em>
                                    Direccion de Fiscal</em>
                            </span>
                            <br>

                            <span class="pre_text_customers mt-2">
                                <b>{{ customer_name|upper }}</b>
                            </span><br>

                            <span class="pre_text_customers">
                                {{ customer.dni }}
                            </span><br>

                            <span class="pre_text_customers">Dirección:
                                {{ customer_address }},
                                {{ customer_location }},
                                {{ customer_province }}.
                            </span><br>

                            <span class="pre_text_customers">
                                CP:
                                {{ customer_zip_code }}, Teléfono:
                                {{ customer_phone }}</span><br>

                        </div>

                        <div class="col-sm-3  text-center"></div>

                        <div class="col-sm-5 pre_div_info">

                            <span class="text_adress">
                                <em>
                                    Direccion de Correspondencia</em>
                            </span><br>

                            <span class="pre_text_customers mt-2">
                                <b>{{ customer_name|upper }}</b>
                            </span><br>

                            <span class="pre_text_customers">
                                {{ customer_dni }}
                            </span><br>

                            <span class="pre_text_customers">Dirección:
                                {{ customer_address }},
                                {{ customer_location }},
                                {{ customer_province }}.
                            </span><br>

                            <span class="pre_text_customers">
                                CP:
                                {{ customer_zip_code }}, Teléfono:
                                {{ customer_phone }}</span><br>

                        </div>
                    </div>

                    <div class="row p-0 justify-content-left">

                        <div class="col-sm-4  p-0 col_text-title-factura">
                            <span class="text-title-factura p-1">Factura&nbsp;</span>

                        </div>
                    </div>

                    <div class="row justify-content-center">

                        <table class="table table-striped table-borderless tabla" style="font-size:0.8rem !important;">

                            <thead style="color:#4d8f24;">
                                <tr style="color:#4d8f24;margin:none !important; padding:none !important;">
                                    <th scope="col" class=""
                                        style="margin:none !important; padding:none !important; font-size:0.8rem !important;background:none !important;">
                                        &nbsp;&nbsp;Fecha
                                    </th>
                                    <th scope="col" class="text-black"
                                        style="margin:none !important; padding:none !important;font-size:0.8rem !important;background:none !important;padding:none !important;">
                                        &nbsp;&nbsp;{{ bill.created_at|date('d/m/y')  }}</th>

                                    <th scope="col" class=""
                                        style="margin:none !important; padding:none !important;font-size:0.8rem !important;background:none !important;">
                                        &nbsp;&nbsp;Cliente</th>
                                    <th scope="col" class="text-black"
                                        style="margin:none !important; padding:none !important;font-size:0.8rem !important;background:none !important;">
                                        &nbsp;&nbsp;{{ customer_name }}</th>
                                    <th scope="col" class=""
                                        style="margin:none !important; padding:none !important;font-size:0.8rem !important;background:none !important;">
                                        &nbsp;&nbsp; Teléfono/Fax</th>
                                    <th scope="col" class="text-black"
                                        style="margin:none !important; padding:none !important;font-size:0.8rem!important;background:none !important;">
                                        &nbsp;&nbsp;{{ customer_phone }}</th>

                                </tr>
                            </thead>

                            <thead style="color:#4d8f24;">
                                <tr>
                                    <th scope="col" class=""
                                        style="font-size:0.8rem !important;background:none !important;">
                                        &nbsp;&nbsp;Numero
                                    </th>

                                    <th scope="col" class=""
                                        style="font-size:0.8rem !important;background:none !important;color:black;">
                                        &nbsp;&nbsp;{{ bill.id_bills }}
                                    </th>

                                    <th scope="col" class=""
                                        style="font-size:0.8rem !important;background:none !important;">
                                        &nbsp;&nbsp;CIF/NIF</th>
                                    <th scope="col" class="text-black"
                                        style="font-size:0.8rem!important;background:none !important;">
                                        &nbsp;&nbsp;{{ customer_dni }}</th>

                                </tr>
                            </thead>

                        </table>

                    </div>

                    <div class="row justify-content-center">

                        <table class="table table-striped table-borderless tabla">

                            <thead style="background-color:#4d8f24;" class="text-white ">
                                <tr>
                                    <th scope="col" class="text-center" style="font-size:0.8rem !important;">
                                        Descripcion
                                    </th>
                                </tr>
                            </thead>



                            <input type="hidden" name="id_b_a[]" value="{{ bill.id_b_a }}">
                            <input type="hidden" name="c_iva" value="{{bill.iva}}">

                            <tbody>
                                <tr>

                                    <td scope="col" class=" text-center text-black"
                                        style="border-bottom:1px solid #dfdfdf87 !important;font-size:0.8rem !important;background:none !important;">

                                        <div class="row top_table p-0 m-1 p-3">


                                            {% for supplement in supplements_edit %}

                                            <div class="col-sm-6 div_suplements_checkbox ">

                                                <div class="checkbox-wrapper-40 mt-1">
                                                    <label>

                                                        <input type="checkbox"
                                                            name="supplements_id[]"
                                                            value="{{ supplement.id_supplements }}"
                                                            {% if supplement.active %}checked{% endif %}>
                                                        {{ supplement.name }}

                                                        <input type="hidden"
                                                            name="supplements_name[{{ supplement.id_supplements }}]"
                                                            value="{{ supplement.name }}">

                                                    </label>
                                                </div>
                                            </div>

                                            <div class="col-sm-3  div_suplements_pvp">

                                                <div class="field field_v2">
                                                    <label for="reserved" class="ha-screen-reader"></label>
                                                    <input id="reserved" class="field__input" type="number"
                                                        placeholder="Pvp " name="pvp_edit[]"
                                                        value="{{ supplement.pvp_edit }}">
                                                    <span class="field__label-wrap" aria-hidden="true">
                                                        <span class="field__label">Editar
                                                            Pvp</span>
                                                    </span>
                                                </div>



                                            </div>
                                            <div class="col-sm-3 div_suplements_pvp">

                                                <div class="field field_v2">
                                                    <label for="reserved" class="ha-screen-reader"></label>
                                                    <input id="supplement_dto" class="field__input" type="number"
                                                        placeholder=" " name="supplement_dto[]"
                                                        value="{{ supplement.dto }}">
                                                    <span class="field__label-wrap" aria-hidden="true">
                                                        <span class="field__label"><b>%
                                                                Dto.</b></span>
                                                    </span>
                                                </div>


                                            </div>
                                            {# {% endif %} #}
                                            {% endfor %}


                                            <p class="mt-2"> *Los suplementos se pueden
                                                editar sus
                                                descripciones o su
                                                valores, o
                                                crear unos
                                                nuevos en el apartado de suplementos. </p>

                                        </div>

                    </div>
                </div>

                </td>

                </tr>



                </tbody>

                </table>

        </div>

        <div class="row justify-content-center">

            <table class="table table-striped table-borderless tabla" style="padding:5px !important;">

                <thead style="background-color:#4d8f24;padding:5px !important;" class="text-white ">
                    <tr>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">Total
                            Bruto
                        </th>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">Suma
                            Dtos.</th>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">
                            % Dto. Com.</th>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">
                            % Dto. P.P</th>

                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">BASE
                            IMPONIBLE</th>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">%
                            I.R.P.F.</th>

                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">%
                            I.V.A.</th>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">Cuota
                        </th>
                        <th scope="col" class="text-center" style="font-size:0.8rem !important;">TOTAL
                        </th>

                    </tr>
                </thead>

                <tbody>

                    <tr>

                        <th scope="col" class="text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            {{ bill.gross_total }}
                        </th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            {{sum_dto}}</th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            -</th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            -
                        </th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            {{ bill.taxable_base }}</th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            -
                        </th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            {{ bill.iva }}</th>

                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            {{bill.fee}}
                        </th>
                        <th scope="col" class=" text-center"
                            style="font-size:0.8rem !important;background:none !important;">
                            {{bill.total_bills}}</th>

                    </tr>

                </tbody>

            </table>
            <hr>
        </div>

        <div class="row justify-content-center">

            <table class="table table-striped table-borderless tabla">

                <thead style="color:#4d8f24;">
                    <tr>
                        <th scope="col" class="" style="font-size:0.8rem !important;background:none !important;">
                            &nbsp;&nbsp;Anticipo:
                        </th>
                        <th scope="col" class="text-black"
                            style="font-size:0.8rem !important;background:none !important;">
                            &nbsp;&nbsp;{{bill.retainer_amount}}</th>

                        <th scope="col" class="" style="font-size:0.8rem !important;background:none !important;">
                            &nbsp;&nbsp;Cargos:</th>
                        <th scope="col" class="text-black"
                            style="font-size:0.8rem !important;background:none !important;">
                            &nbsp;&nbsp;{{bill.charge}}</th>
                        <th scope="col" class="" style="font-size:0.8rem !important;background:none !important;">
                            &nbsp;&nbsp; Saldo:</th>
                        <th scope="col" class="text-black"
                            style="font-size:0.8rem !important;background:none !important;">
                            &nbsp;&nbsp;{{bill.balance}}
                        </th>

                        <th scope="col" class="text-white"
                            style="font-size:0.8rem !important;color:#4d8f24;background-color:#4d8f24;">
                            &nbsp;&nbsp; TOTAL FACTURA</th>
                        <th scope="col" class="text-white"
                            style="font-size:0.8rem !important;color:#4d8f24;background-color:#4d8f24;">
                            &nbsp;&nbsp;{{bill.charge}}
                            EUROS</th>

                    </tr>
                </thead>

            </table>

        </div>

    </div>
    </div>
    </div>
    <div class="col-sm-1 "></div>
    </div>

        {% endfor %}

    <div class="row mt-3">
        <div class="col-4 text-center"></div>
        <div class="col-4"></div>
        <div class="col-4"><a class="text-white ">
                <button class=" button_bills_pdf " type="submit" style="color:#04BDFD !important;">
                    <img src="\images\icon_guardar.png" alt="...">&nbsp;&nbsp;&nbsp;&nbsp;
                    Guardar

                </button></a></div>
    </div>

    </form>

    <div class="row pt-5 text-rows-back">
        <div class="col">
           <p class=" text-center">
                <a href="{{ routeTo('listBills') }}">
                    <img class="rounded mx-auto d-block " src="\images\regresar.png" alt="...">
                </a>
                <br>
               Volver al listado de Facturas
            </p>
        </div>
    </div>
    </div>
    </div>
    </div>

    {% include 'Front/base/footer.html.twig' %}
    {% endblock %}

    {% block script %}
    {{parent(script)}}
    <script>
        setTimeout(function() {
            $(".alerta_msg_bills").fadeOut(2000);
        }, 2200);
    </script>

    <script>
        function mostrarOcultar() {
            var contenido = document.getElementById("mostrar_contenido");
            if (contenido.style.display === "none") {
                contenido.style.display = "block";
            } else {
                contenido.style.display = "none";
            }
            var acc = document.getElementsByClassName("accordion_desplegable");
            for (var i = 0; i < acc.length; i++) {
                acc[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var panel = this.nextElementSibling;
                    if (panel.style.display === "block") {
                        panel.style.display = "none";
                    } else {
                        panel.style.display = "block";
                    }
                });
            }
        }
        var divToShow = document.getElementById("error");
        divToShow.style.display = "none";
        //Anticipo switch
    </script>

    <script src="https://cdn.lordicon.com/qjzruarw.js"></script>

    {% endblock %}
